# MathPilot



# 1. ê¸°íš

### ìŠ¬ë¼ì´ë“œ ê°•ì˜ ìžë™ ë‹¨ê¶Œí™” ì†”ë£¨ì…˜

**ê°•ì˜ëŠ” ë“£ëŠ” ê²ƒ, í•„ê¸°ëŠ” AIì˜ ê²ƒ. ë“£ëŠ” ìˆœê°„ ë‚´ ë…¸íŠ¸ê°€ ë˜ëŠ” í•™ìŠµ í˜ì‹  ì†”ë£¨ì…˜**
**"ìˆ˜ì—…ì€ íŽ¸í•˜ê²Œ ê·€ë¡œ ë“£ê³ , í•„ê¸°ëŠ” AIê°€ ë‹¤ ëë‚´ë†“ëŠ”"**

**ì‚¬ìš©ìžê°€ ì˜ìƒ ìž¬ìƒ ì¤‘ì— í•„ê¸°í•˜ëŠë¼ ë©ˆì¶œ í•„ìš”ê°€ ì—†ë‹¤.**

**ìˆ˜ì—… ëë‚˜ë©´ ì±…ìƒ ìœ„ì— ë†“ì—¬ ìžˆëŠ” 'ì™„ë²½í•œ ë³µìŠµ ë…¸íŠ¸'.**

**"í•„ê¸° ê°•ë°• ë‚´ë ¤ë†“ê³ , ì´í•´í•˜ëŠ” ë°ë§Œ ì§‘ì¤‘í•˜ì„¸ìš”. ê¸°ë¡ì€ AIê°€ ë‚¨ê¹ë‹ˆë‹¤."**

## 1. ê¸°íš ê°œìš” (Overview)

### íƒ€ê²Ÿ (Target)

- **Primary:** ì „ê³µ ìˆ˜ì—…(ìˆ˜í•™, ê³µí•™)ì—ì„œ ìˆ˜ì‹ê³¼ ë„í‘œê°€ ë§Žì€ PPT ê°•ì˜ë¥¼ ë“£ëŠ” ëŒ€í•™ìƒ.
- **Secondary:** ê¸°ìˆ  ì»¨í¼ëŸ°ìŠ¤(NDC, PyCon ë“±) ì˜ìƒì„ ë¹ ë¥´ê²Œ í…ìŠ¤íŠ¸ë¡œ ì •ë¦¬í•˜ê³  ì‹¶ì€ ê°œë°œìž.

### íŽ˜ì¸ í¬ì¸íŠ¸ (Pain Points)

1. **ë©€í‹°íƒœìŠ¤í‚¹ì˜ í•œê³„:** ìŠ¬ë¼ì´ë“œ ë‚´ìš©ì„ ë°›ì•„ì ë‹¤ê°€ ì •ìž‘ ê°•ì‚¬ì˜ ì¤‘ìš”í•œ êµ¬ë‘ ì„¤ëª…(Insight)ì„ ë†“ì¹¨.
2. **ë¹„íš¨ìœ¨ì ì¸ ë³µìŠµ:** "ê·¸ ê³µì‹ ì„¤ëª…í•  ë•Œ ë¬´ìŠ¨ ì˜ˆì‹œë¥¼ ë“¤ì—ˆì§€?"ë¥¼ ì°¾ìœ¼ë ¤ ì˜ìƒì„ í•˜ì—¼ì—†ì´ ëŒë ¤ë´ì•¼ í•¨.
3. **ìžë£Œì˜ íŒŒíŽ¸í™”:** PDF ê°•ì˜ìžë£Œ ë”°ë¡œ, í•„ê¸° ë…¸íŠ¸ ë”°ë¡œ, ë…¹í™” ì˜ìƒ ë”°ë¡œ ë†€ì•„ì„œ í•™ìŠµ íë¦„ì´ ëŠê¹€.

### í•µì‹¬ ê°€ì¹˜ (Core Value)

1. **Automated Sync:** ì‹œê° ì •ë³´(ìŠ¬ë¼ì´ë“œ)ì™€ ì²­ê° ì •ë³´(ìŒì„± í•´ì„¤)ë¥¼ AIê°€ ìžë™ìœ¼ë¡œ ë§¤í•‘í•˜ì—¬ **'ë‹¨ê¶Œí™”ëœ ë…¸íŠ¸'** ì œê³µ.
2. **Interactive Deep-Dive:** ì´í•´ê°€ ì•ˆ ê°€ëŠ” êµ¬ê°„(SOS)ì€ AIê°€ **'ê³¼ì™¸ ì„ ìƒë‹˜'**ì²˜ëŸ¼ ì‹¬ì¸µ í•´ì„¤ ì œê³µ.
3. **Searchable Knowledge:** ëª¨ë“  ì˜ìƒ ì½˜í…ì¸ ë¥¼ êµ¬ì¡°í™”ëœ Markdown($\LaTeX$)ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ê²€ìƒ‰ ë° 2ì°¨ ê°€ê³µ(Notion, PDF) ìš©ì´.

### AS IS vs TO BE

ê°•ì˜ìžë£Œ, ë°›ì•„ì ì€ ë…¸íŠ¸, ë”°ë¡œ ì°¾ì•„ë³¸ gpt : ë³µìž¡í•´ ì£½ê² ë„¤

í†µí•© ë‹¨ê¶Œí™” ë…¸íŠ¸ -> ë…¸ì…˜ìœ¼ë¡œ ê°„ë‹¨í•˜ê²Œ export ! : ë„ˆë¬´ íŽ¸í•˜ë‹¤.



# 2. input - process - output

## input 

1. video(audio, vision)
2. userì˜ ìž˜ ëª¨ë¥´ê² ì–´ìš” timestamp

## process 

ì²˜ë¦¬ ê³„íš : visionê³¼ audioì˜ ë¶„ë¦¬

[ vision(ppt ìŠ¬ë¼ì´ë“œ) ]

1. video to img (ë‹¨, 1ì´ˆë§ˆë‹¤ í•œ í”„ë ˆìž„ì”©ì„ defaultë¡œ, clië¡œ ì˜µì…˜ ì„¤ì •ì€ ê°€ëŠ¥í•˜ë„ë¡.)

 - ì „í™˜ì€ visionê°„ ìœ ì‚¬ë„ ê¸‰ë³€í™”ë¡œ íƒì§€.

2. ì „í™˜ timestamp(ì´ì „ í™”ë©´ì— ë¹„í•´ ìƒˆë¡œìš´ í™”ë©´ì´)
3. img to text (OCR) -> ì´í›„ êµ¬ì¡°í™”ëœ markdown ë¬¸ì„œë¡œ ë³€í™˜
   - ìˆ˜í•™ ê°•ì˜ ë„ë©”ì¸ì´ê¸° ë•Œë¬¸ì—, ìˆ˜ì‹ì„ LaTeXë¡œ ë³€í™˜í•  ìˆ˜ ìžˆì–´ì•¼ í•¨.
     +. ì¶”í›„, íŒì„œê¹Œì§€ í™•ìž¥í•  ìˆ˜ ìžˆìŒ. ì˜ˆë¥¼ ë“¤ì–´, ë¹„ì •í˜•ì˜ íŒì„œ ë‚´ìš©ì„ ì œëª©, ë³¸ë¬¸, ê³µì‹ìœ¼ë¡œ êµ¬ì¡°í™”í•˜ì—¬ Notionì´ë‚˜ PDF í˜•íƒœì˜ ë””ì§€í„¸ ë…¸íŠ¸ë¡œ ì¦‰ì‹œ ë³€í™˜ê¹Œì§€.

[ audio ]

1. STT (openai - whisper ai -> nvidiaì˜ stt ëª¨ë¸ ì‚¬ìš© ê°€ëŠ¥ì„± ìžˆìŒ.)
2. ì´í›„ vision íƒ€ìž„ìŠ¤íƒ¬í”„ (vision2)ì— ë§žì¶”ì–´ ìŠ¬ë¼ì´ë“œ ë³„ë¡œ ìš”ì•½ -> ì•žë’¤ë¡œ íŒ¨ë”©ì„ ë„£ì–´ì„œ ì‹±í¬ ë¬¸ì œ ë°©ì§€
3. ì´í›„ visionì„ í†µí•´ ì‚°ì¶œëœ markdown ë¬¸ì„œì— ìš”ì•½ í†µí•© -> ë‹¨ê¶Œí™” ë…¸íŠ¸ë¡œ ì‚°ì¶œ.
   (ì¶”í›„)

[ users ]

1. ìž˜ ëª¨ë¥´ê² ì–´ìš” timestampê°€ ì–´ë”” audioì™€ ì–´ë”” visionì— í•´ë‹¹í•˜ëŠ”ì§€ë¥¼ í™•ì¸í•´ì„œ, 
   í•´ë‹¹ ë¶€ë¶„ì—ëŠ” ë³„ë„ë¡œ ìƒì„¸í•œ ì„¤ëª… ë‹¬ì•„ì£¼ê¸°  -> ë‹¨ê¶Œí™” ë…¸íŠ¸ì— í†µí•©.

## output

1. ë‹¨ê¶Œí™”ë…¸íŠ¸.md
   - ë§ˆí¬ë‹¤ìš´ ë Œë”ëŸ¬ (react-markdown, rehype-katex) ë¶™ì—¬ì„œ ìˆ˜ì‹ì´ ì˜ˆì˜ê²Œ ë‚˜ì˜¤ë„ë¡ ì²˜ë¦¬



# 2. gemini ì •ë¦¬ë²„ì „.

------

## 2. Input - Process - Output (IPO Flow)

### Input

1. **Video Source:** ê°•ì˜ ì˜ìƒ íŒŒì¼ (mp4) ë˜ëŠ” URL.
2. **User Interaction (SOS):** "ìž˜ ëª¨ë¥´ê² ì–´ìš”" ë²„íŠ¼ í´ë¦­ íƒ€ìž„ìŠ¤íƒ¬í”„ List.
   - *ì˜ˆ: `[05:23, 12:40]` (ì´ êµ¬ê°„ì€ ì¶”ê°€ ì„¤ëª…ì´ í•„ìš”í•¨)*

### Process (Parallel Pipeline)

**[Track A: Vision Processing (Slide Extraction)]**

1. **Frame Extraction:** 1ì´ˆ ë‹¨ìœ„ë¡œ í”„ë ˆìž„ ì¶”ì¶œ (Default).
2. **Scene Detection (ì¤‘ë³µ ì œê±°):**
   - `SSIM` ë˜ëŠ” `OpenCV` ížˆìŠ¤í† ê·¸ëž¨ ë¹„êµë¥¼ í†µí•´ **í™”ë©´ ì „í™˜(Slide Transition)** ê°ì§€.
   - ìœ ì‚¬ë„ê°€ ê¸‰ê²©ížˆ ë‚®ì•„ì§€ëŠ” ì‹œì ì„ 'New Slide'ë¡œ ì •ì˜í•˜ê³  í•´ë‹¹ ì´ë¯¸ì§€ ì €ìž¥.
3. **Visual Structure OCR:**
   - ì´ë¯¸ì§€ë¥¼ í…ìŠ¤íŠ¸ë¡œ ë³€í™˜í•˜ë˜, ë‹¨ìˆœ í…ìŠ¤íŠ¸ê°€ ì•„ë‹Œ **êµ¬ì¡° ì •ë³´(ì œëª©, ë³¸ë¬¸, ìˆ˜ì‹)** ë³´ì¡´.
   - **Key Tech:** ìˆ˜ì‹ì€ ë°˜ë“œì‹œ $\LaTeX$ í¬ë§·ìœ¼ë¡œ ë³€í™˜ ($x = \frac{-b \pm \sqrt{b^2-4ac}}{2a}$).

**[Track B: Audio Processing (Contextualization)]**

1. **Speech-to-Text (STT):** Whisper AIë¥¼ í™œìš©í•˜ì—¬ ì „ì²´ ìŠ¤í¬ë¦½íŠ¸ ì¶”ì¶œ.
2. **Segmentation by Slide:**
   - Track Aì—ì„œ ì–»ì€ **'ìŠ¬ë¼ì´ë“œ ì „í™˜ íƒ€ìž„ìŠ¤íƒ¬í”„'**ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë¶„í• .
   - *ì˜ˆ: Slide 1ì´ 00:00~02:10ì´ë¼ë©´, í•´ë‹¹ êµ¬ê°„ì˜ ì˜¤ë””ì˜¤ í…ìŠ¤íŠ¸ë§Œ ì¶”ì¶œ.*
3. **Context Fusion (Summarization):**
   - `System Prompt`: "ë„ˆëŠ” ëŒ€í•™ì›ìƒ ì¡°êµì•¼. ìŠ¬ë¼ì´ë“œ ë‚´ìš©(OCR)ê³¼ ê°•ì‚¬ì˜ ë§(STT)ì„ í•©ì³ì„œ ì™„ë²½í•œ ìš”ì•½ ë…¸íŠ¸ë¥¼ ë§Œë“¤ì–´."
   - ì‹±í¬ ì˜¤ë¥˜ ë°©ì§€ë¥¼ ìœ„í•´ ì•žë’¤ 5~10ì´ˆ íŒ¨ë”©(Buffer)ì„ í¬í•¨í•˜ì—¬ ë¬¸ë§¥ íŒŒì•….

**[Track C: User SOS Processing (Personalization)]**

1. **Mapping:** ì‚¬ìš©ìžê°€ ìž…ë ¥í•œ SOS íƒ€ìž„ìŠ¤íƒ¬í”„ê°€ ì–´ëŠ ìŠ¬ë¼ì´ë“œ êµ¬ê°„ì— ì†í•˜ëŠ”ì§€ í™•ì¸.
2. **Deep Explanation:**
   - í•´ë‹¹ êµ¬ê°„ì— ëŒ€í•´ì„œë§Œ LLM Temperatureë¥¼ ë‚®ì¶”ê³  ìƒì„¸ ì„¤ëª… ëª¨ë“œ ê°€ë™.
   - *ê²°ê³¼ë¬¼:* ë…¸íŠ¸ í•´ë‹¹ ë¶€ë¶„ì— `ðŸ’¡ **ì‹¬ì¸µ í•´ì„¤**` ë¸”ë¡ ì¶”ê°€ (ê°œë… ì •ì˜, ì˜ˆì‹œ, ìœ ë„ ê³¼ì • ìƒì„¸ ì„œìˆ ).

### ðŸ“¤ Output

1. **Final Artifact:** `ë‹¨ê¶Œí™”ë…¸íŠ¸.md` (Markdown File)
2. **Rendering:**
   - **Slide Image:** í•´ë‹¹ êµ¬ê°„ì˜ PPT ìŠ¤í¬ë¦°ìƒ· ë°°ì¹˜.
   - **Text:** ìš”ì•½ëœ ê°•ì˜ ë‚´ìš©.
   - **Math:** $\LaTeX$ ìˆ˜ì‹ ë Œë”ë§.
   - **Annotations:** SOS ìš”ì²­ êµ¬ê°„ì— ëŒ€í•œ í•˜ì´ë¼ì´íŠ¸ ë° ìƒì„¸ ì£¼ì„.

------

## 3. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ (System Architecture)

```mermaid
graph TD
    User["User (React Client)"] -->|1. Upload Video & SOS Click| API[FastAPI Server]
    
    subgraph "Backend Processing"
        API -->|Async Task| Controller[Task Manager]
        
        subgraph "Vision Track"
            Controller -->|Video File| CV[OpenCV / FFmpeg]
            CV -->|"Extract Frames (1fps)"| Logic[Similarity Check]
            Logic -->|Unique Slides + Timestamp| OCR[Vision LLM / OCR]
            OCR -->|Markdown Text + LaTeX| SlideData[(Slide JSON)]
        end
        
        subgraph "Audio Track"
            Controller -->|Audio Extraction| Whisper[Whisper Model]
            Whisper -->|Full Script + Timestamp| ScriptData[(Script JSON)]
        end
        
        subgraph "Synthesis & GenAI"
            SlideData & ScriptData -->|Merge by Time| Fusion[Prompt Engine]
            Fusion -->|Context + SOS Request| LLM[GPT-4o / Gemini Pro]
            LLM -->|Generate Content| Markdown[Markdown Builder]
        end
    end
    
    Markdown -->|Final .md File| API
    API -->|Rendered Note| User
```

------

## 4. ê¸°ìˆ  ìŠ¤íƒ (Tech Stack)

BE : fastapi
FE : react
AI : Vision, Audio, LLM

| **êµ¬ë¶„**        | **ê¸°ìˆ  (Technology)** | **ìƒì„¸ ì—­í• **                                                |
| --------------- | --------------------- | ------------------------------------------------------------ |
| **Frontend**    | **React**             | ë¹„ë””ì˜¤ í”Œë ˆì´ì–´, SOS ë²„íŠ¼ UI, ë§ˆí¬ë‹¤ìš´ ë·°ì–´ (`react-markdown`, `rehype-katex`) |
| **Backend**     | **FastAPI**           | ë¹„ë™ê¸° ìž‘ì—… ì²˜ë¦¬(`BackgroundTasks`), REST API, íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬ |
| **AI (Vision)** | **OpenCV**            | í”„ë ˆìž„ ì¶”ì¶œ ë° ì´ë¯¸ì§€ ìœ ì‚¬ë„(SSIM) ë¹„êµë¥¼ í†µí•œ ìŠ¬ë¼ì´ë“œ ì „í™˜ ê°ì§€ |
| **AI (Audio)**  | **Whisper (OpenAI)**  | ê³ ì •ë°€ STT (í•œêµ­ì–´/ì˜ì–´ ì¸ì‹)                                |
| **AI (LLM)**    | **GPT-4o / Gemini**   | OCR ê²°ê³¼ì™€ STT ìŠ¤í¬ë¦½íŠ¸ ìœµí•©, ìˆ˜ì‹ $\LaTeX$ ë³€í™˜, ë§ˆí¬ë‹¤ìš´ ìƒì„± |
| **Infra/Tools** | **FFmpeg**            | ë¹„ë””ì˜¤ì—ì„œ ì˜¤ë””ì˜¤ ì¶”ì¶œ ë° í¬ë§· ë³€í™˜                          |

------

## 5. í•´ì»¤í†¤ ì‹œì—° ì‹œë‚˜ë¦¬ì˜¤ (Demo Flow)

1. **ìƒí™© ì„¤ì •:** ì–´ë ¤ìš´ 'ìœ„ìƒìˆ˜í•™' ë˜ëŠ” 'ë”¥ëŸ¬ë‹ ìˆ˜ì‹' ê°•ì˜ë¥¼ ë“£ëŠ” í•™ìƒ.
2. **Action:**
   - ì˜ìƒì„ ë³´ë‹¤ê°€ êµìˆ˜ê°€ ë³µìž¡í•œ ìˆ˜ì‹ì„ ì„¤ëª…í•  ë•Œ **[ëª¨ë¥´ê² ì–´ìš” ðŸ¤¯]** ë²„íŠ¼ í´ë¦­.
   - ê°•ì˜ ì¢…ë£Œ í›„ **[ë…¸íŠ¸ ìƒì„±]** í´ë¦­.
3. **Result (Wow Point):**
   - í™”ë©´ ì™¼ìª½: ê°•ì˜ ìŠ¬ë¼ì´ë“œ ì´ë¯¸ì§€.
   - í™”ë©´ ì˜¤ë¥¸ìª½: ê¹”ë”í•˜ê²Œ ì •ë¦¬ëœ í…ìŠ¤íŠ¸ì™€ **ì™„ë²½í•˜ê²Œ ë³€í™˜ëœ $\LaTeX$ ìˆ˜ì‹**.
   - **SOS ê²°ê³¼:** ì‚¬ìš©ìžê°€ ë²„íŠ¼ì„ ëˆŒë €ë˜ ë¶€ë¶„ì— **"ðŸ’¡ ì—¬ê¸°ëŠ” ê³ ìœ ê°’ ë¶„í•´(Eigen Decomposition)ê°€ ì‚¬ìš©ëœ ë‹¨ê³„ìž…ë‹ˆë‹¤. ì™œëƒí•˜ë©´..."**ì´ë¼ëŠ” ì¹œì ˆí•œ ì„¤ëª… ë°•ìŠ¤ê°€ ìƒì„±ë˜ì–´ ìžˆìŒ.





```mermaid
graph TD
    User["User (React)"] -->|Upload Video & SOS Timestamps| API[FastAPI Server]
    
    subgraph "Phase 1: Pre-processing (Parallel)"
        API -->|1. Extract Slides| CV["OpenCV (Scene Detection)"]
        CV -->|Images + Time ranges| SlideDB[(Temp Storage)]
        
        API -->|2. Extract Audio| FFMPEG[FFmpeg / MoviePy]
        FFMPEG -->|Audio File| STT[Whisper AI]
        STT -->|"Full Transcript (Text + Time)"| TranscriptDB[(Temp Storage)]
    end
    
    subgraph "Phase 2: Data Fusion & LLM Processing"
        SlideDB & TranscriptDB -->|3. Mapping| Merger[Segment Matcher]
        Merger -->|Prompt Construction| LLM[GPT-4o / Gemini 1.5 Pro]
        
        SOS[SOS Timestamps] -->|Check Intersection| LLM
    end
    
    subgraph "Phase 3: Generation"
        LLM -->|4. Generate Markdown| MD[Markdown Builder]
        MD -->|Final Output| API
    end
    
    API -->|Response| User
```