# ğŸ“ MathNote êµ¬ì¡° ì´ˆì•ˆ ì‘ì—…ë‚´ì—­

> **ì‘ì„±ì¼:** 2025-01-31 16:00  
> **ìƒíƒœ:** âœ… ìŠ¤ìºí´ë”© ì™„ë£Œ, í…ŒìŠ¤íŠ¸ í†µê³¼ (104/104)

---

## 1. ì‘ì—… ê°œìš”

### 1.1 ëª©í‘œ
ê°•ì˜ ì˜ìƒ(Vision + Audio)ì„ ë¶„ì„í•˜ì—¬ ìˆ˜ì‹($\LaTeX$)ì´ í¬í•¨ëœ **ë‹¨ê¶Œí™” ë…¸íŠ¸**ë¥¼ ìë™ ìƒì„±í•˜ëŠ” FastAPI ë°±ì—”ë“œ êµ¬ì¡° ì„¤ê³„ ë° êµ¬í˜„

### 1.2 ì™„ë£Œëœ ì‘ì—…
- [x] ë ˆí¬ì§€í† ë¦¬ êµ¬ì¡° ì„¤ê³„ ë° ìƒì„±
- [x] FastAPI ì•± ìŠ¤ìºí´ë”©
- [x] í™˜ê²½ ì„¤ì • ì‹œìŠ¤í…œ (Pydantic Settings)
- [x] API ì—”ë“œí¬ì¸íŠ¸ ì •ì˜ (video, note)
- [x] ì„œë¹„ìŠ¤ ëª¨ë“ˆ ë¶„ë¦¬ (vision, audio, synthesis, llm, storage)
- [x] Pydantic ìŠ¤í‚¤ë§ˆ ì •ì˜ (requests, responses)
- [x] S3 Presigned URL ê¸°ë°˜ ì—…ë¡œë“œ í”Œë¡œìš°
- [x] LLM í´ë¼ì´ì–¸íŠ¸ ì¶”ìƒí™” (OpenAI, Gemini)
- [x] Docker ë° docker-compose ì„¤ì •
- [x] **í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± (104ê°œ í…ŒìŠ¤íŠ¸ ëª¨ë‘ í†µê³¼)**

---

## 2. ì•„í‚¤í…ì²˜ ì„¤ê³„

### 2.1 ì „ì²´ êµ¬ì¡°
```
project-mathnote/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ main.py              # FastAPI ì—”íŠ¸ë¦¬í¬ì¸íŠ¸
â”‚   â”‚   â”œâ”€â”€ config.py            # í™˜ê²½ ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ deps.py          # ì˜ì¡´ì„± ì£¼ì…
â”‚   â”‚   â”‚   â””â”€â”€ routes/
â”‚   â”‚   â”‚       â”œâ”€â”€ video.py     # ì˜ìƒ ì—…ë¡œë“œ/ì²˜ë¦¬ API
â”‚   â”‚   â”‚       â””â”€â”€ note.py      # ë…¸íŠ¸ ì¡°íšŒ/ë‹¤ìš´ë¡œë“œ API
â”‚   â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”‚   â””â”€â”€ exceptions.py    # ì»¤ìŠ¤í…€ ì˜ˆì™¸
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ video_service.py # íŒŒì´í”„ë¼ì¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
â”‚   â”‚   â”‚   â”œâ”€â”€ vision/          # Track A
â”‚   â”‚   â”‚   â”œâ”€â”€ audio/           # Track B
â”‚   â”‚   â”‚   â”œâ”€â”€ synthesis/       # Track C
â”‚   â”‚   â”‚   â”œâ”€â”€ llm/             # LLM í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â”‚   â””â”€â”€ storage/         # S3 ìŠ¤í† ë¦¬ì§€
â”‚   â”‚   â”œâ”€â”€ schemas/
â”‚   â”‚   â”‚   â”œâ”€â”€ requests.py      # ìš”ì²­ ìŠ¤í‚¤ë§ˆ
â”‚   â”‚   â”‚   â””â”€â”€ responses.py     # ì‘ë‹µ ìŠ¤í‚¤ë§ˆ
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚       â””â”€â”€ time_utils.py    # íƒ€ì„ìŠ¤íƒ¬í”„ ìœ í‹¸
â”‚   â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ docs/
â”œâ”€â”€ frontend/                    # (ì¶”í›„)
â”œâ”€â”€ .env.example
â”œâ”€â”€ docker-compose.yml
â””â”€â”€ README.md
```

### 2.2 ê³„ì¸µ êµ¬ì¡° (Layered Architecture)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API Layer (routes/)                   â”‚
â”‚         HTTP ìš”ì²­/ì‘ë‹µ ì²˜ë¦¬, ë¼ìš°íŒ…, ê²€ì¦                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  Service Layer (services/)               â”‚
â”‚            ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, íŒŒì´í”„ë¼ì¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 Schema Layer (schemas/)                  â”‚
â”‚           Pydantic ëª¨ë¸, íƒ€ì… ì•ˆì „ì„± í™•ë³´                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   Core Layer (core/)                     â”‚
â”‚              ê³µí†µ ì„¤ì •, ì˜ˆì™¸, íš¡ë‹¨ ê´€ì‹¬ì‚¬                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ëª¨ë“ˆë³„ ì„¤ëª…

### 3.1 `app/config.py` - ì„¤ì • ê´€ë¦¬

**ì—­í• :** í™˜ê²½ ë³€ìˆ˜ ê¸°ë°˜ ì„¤ì • ê´€ë¦¬ (í•˜ë“œì½”ë”© ë°©ì§€)

**ì„¤ê³„ ê·¼ê±°:**
- READMEì—ì„œ "clië¡œ ì˜µì…˜ ì„¤ì •ì€ ê°€ëŠ¥í•˜ë„ë¡" ìš”êµ¬ì‚¬í•­
- Pydantic Settingsë¡œ íƒ€ì… ì•ˆì „ì„± + í™˜ê²½ ë¶„ë¦¬
- `.env` íŒŒì¼ë¡œ ê°œë°œ/í”„ë¡œë•ì…˜ ì„¤ì • ë¶„ë¦¬

**ì£¼ìš” ì„¤ì •:**
| ì¹´í…Œê³ ë¦¬ | ì„¤ì • í•­ëª© | ì„¤ëª… |
|---------|----------|------|
| API Keys | `OPENAI_API_KEY`, `GOOGLE_API_KEY` | LLM API í‚¤ |
| AWS S3 | `AWS_ACCESS_KEY_ID`, `S3_BUCKET_NAME` ë“± | í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€ |
| Processing | `FRAME_INTERVAL_SEC`, `SSIM_THRESHOLD` | ì²˜ë¦¬ ì˜µì…˜ |
| LLM | `LLM_PROVIDER`, `LLM_MODEL`, `LLM_TEMPERATURE` | LLM ì„¤ì • |

---

### 3.2 `app/api/routes/` - API ë¼ìš°í„°

#### `video.py`
**ì—­í• :** ì˜ìƒ ì—…ë¡œë“œ ë° ì²˜ë¦¬ API

| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ì„¤ëª… |
|-----------|--------|------|
| `/upload-url` | POST | S3 Presigned Upload URL ë°œê¸‰ |
| `/{task_id}/confirm-upload` | POST | ì—…ë¡œë“œ ì™„ë£Œ í™•ì¸ |
| `/{task_id}/process` | POST | ì²˜ë¦¬ ì‹œì‘ (BackgroundTasks) |
| `/{task_id}/status` | GET | ì²˜ë¦¬ ìƒíƒœ ì¡°íšŒ |

#### `note.py`
**ì—­í• :** ë…¸íŠ¸ ì¡°íšŒ ë° ë‹¤ìš´ë¡œë“œ API

| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ì„¤ëª… |
|-----------|--------|------|
| `/{task_id}` | GET | ìƒì„±ëœ ë…¸íŠ¸ ì¡°íšŒ (JSON) |
| `/{task_id}/download` | GET | ë§ˆí¬ë‹¤ìš´ ë‹¤ìš´ë¡œë“œ URL |
| `/{task_id}/slides/{n}/image` | GET | ìŠ¬ë¼ì´ë“œ ì´ë¯¸ì§€ URL |

---

### 3.3 `app/services/vision/` - Vision Pipeline (Track A)

**ì—­í• :** ì˜ìƒì—ì„œ ìŠ¬ë¼ì´ë“œ ì¶”ì¶œ ë° OCR

```mermaid
graph LR
    Video --> FrameExtractor --> SceneDetector --> OCRProcessor --> SlideData
```

| ëª¨ë“ˆ | ì—­í•  | ê¸°ìˆ  |
|------|------|------|
| `frame_extractor.py` | Nì´ˆ ê°„ê²© í”„ë ˆì„ ì¶”ì¶œ | OpenCV / FFmpeg |
| `scene_detector.py` | ìŠ¬ë¼ì´ë“œ ì „í™˜ ê°ì§€ | SSIM ë¹„êµ |
| `ocr_processor.py` | í…ìŠ¤íŠ¸+ìˆ˜ì‹ ì¶”ì¶œ | Vision LLM (GPT-4o-vision) |

**ì„¤ê³„ ê·¼ê±°:**
- í”„ë ˆì„ ì¶”ì¶œ â†’ ì¥ë©´ ë³€ê²½ ê°ì§€ â†’ OCRì˜ **ìˆœì°¨ì  íŒŒì´í”„ë¼ì¸**
- SSIMìœ¼ë¡œ ì¤‘ë³µ í”„ë ˆì„ ì œê±° â†’ API ë¹„ìš© ì ˆê°
- Vision LLMìœ¼ë¡œ OCR + LaTeX ë³€í™˜ ë™ì‹œ ì²˜ë¦¬ â†’ ìˆ˜ì‹ ì •í™•ë„ í–¥ìƒ

---

### 3.4 `app/services/audio/` - Audio Pipeline (Track B)

**ì—­í• :** ìŒì„± ì¸ì‹ ë° ì „ì‚¬

```mermaid
graph LR
    Video --> AudioExtractor --> STTProcessor --> TranscriptData
```

| ëª¨ë“ˆ | ì—­í•  | ê¸°ìˆ  |
|------|------|------|
| `audio_extractor.py` | ë¹„ë””ì˜¤ì—ì„œ ì˜¤ë””ì˜¤ ì¶”ì¶œ | FFmpeg |
| `stt_processor.py` | ìŒì„± â†’ í…ìŠ¤íŠ¸ ë³€í™˜ | OpenAI Whisper |

**ì„¤ê³„ ê·¼ê±°:**
- Visionê³¼ **ë…ë¦½ì ìœ¼ë¡œ ë³‘ë ¬ ì²˜ë¦¬** ê°€ëŠ¥
- WhisperëŠ” íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨ ì „ì‚¬ ì§€ì› â†’ ìŠ¬ë¼ì´ë“œì™€ ë™ê¸°í™” ìš©ì´

---

### 3.5 `app/services/synthesis/` - Synthesis Pipeline (Track C)

**ì—­í• :** Vision + Audio ìœµí•©, ë…¸íŠ¸ ìƒì„±

```mermaid
graph LR
    SlideData --> SegmentMapper
    TranscriptData --> SegmentMapper
    SegmentMapper --> PromptEngine --> NoteGenerator --> FinalNote
```

| ëª¨ë“ˆ | ì—­í•  |
|------|------|
| `segment_mapper.py` | ìŠ¬ë¼ì´ë“œ íƒ€ì„ìŠ¤íƒ¬í”„ ê¸°ì¤€ ì „ì‚¬ ë¶„í• , SOS ë§¤í•‘ |
| `prompt_engine.py` | LLM í”„ë¡¬í”„íŠ¸ êµ¬ì„± (ìš”ì•½, SOS í•´ì„¤) |
| `note_generator.py` | ë§ˆí¬ë‹¤ìš´ ë…¸íŠ¸ ì¡°í•© |

**ì„¤ê³„ ê·¼ê±°:**
- Vision/Audio ê²°ê³¼ë¥¼ **íƒ€ì„ìŠ¤íƒ¬í”„ ê¸°ì¤€ìœ¼ë¡œ ë§¤í•‘**
- íŒ¨ë”©(Â±5ì´ˆ)ìœ¼ë¡œ ì‹±í¬ ì˜¤ë¥˜ ë°©ì§€
- SOS ìš”ì²­ êµ¬ê°„ì— ëŒ€í•´ ë³„ë„ ì‹¬ì¸µ í•´ì„¤ ìƒì„±

---

### 3.6 `app/services/llm/` - LLM í´ë¼ì´ì–¸íŠ¸

**ì—­í• :** LLM API ì¶”ìƒí™”

```
BaseLLMClient (Abstract)
    â”œâ”€â”€ OpenAIClient (GPT-4o, GPT-4o-vision)
    â””â”€â”€ GeminiClient (Gemini Pro, Gemini Vision)
```

**ì„¤ê³„ ê·¼ê±°:**
- **Strategy íŒ¨í„´** ì ìš© â†’ Provider êµì²´ ìš©ì´
- `LLM_PROVIDER` í™˜ê²½ ë³€ìˆ˜ë¡œ ëŸ°íƒ€ì„ì— ì„ íƒ
- Vision LLM ë©”ì„œë“œ ë¶„ë¦¬ (`analyze_image`, `analyze_image_url`)

---

### 3.7 `app/services/storage/` - ìŠ¤í† ë¦¬ì§€ í´ë¼ì´ì–¸íŠ¸

**ì—­í• :** í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€ ì¶”ìƒí™”

```
BaseStorageClient (Abstract)
    â””â”€â”€ S3StorageClient (AWS S3)
```

**ì„¤ê³„ ê·¼ê±°:**
- **Presigned URL** ë°©ì‹ â†’ í´ë¼ì´ì–¸íŠ¸ê°€ S3ì— ì§ì ‘ ì—…ë¡œë“œ
- ì„œë²„ ë¶€í•˜ ê°ì†Œ, ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬ ê°€ëŠ¥
- ì¶”ìƒí™”ë¡œ í–¥í›„ GCS, Azure Blob ë“± í™•ì¥ ê°€ëŠ¥

**S3 ì €ì¥ êµ¬ì¡°:**
```
s3://mathnote-bucket/
â”œâ”€â”€ videos/{task_id}/original.mp4
â”œâ”€â”€ processing/{task_id}/
â”‚   â”œâ”€â”€ frames/
â”‚   â”œâ”€â”€ slides/
â”‚   â””â”€â”€ audio.wav
â””â”€â”€ outputs/{task_id}/
    â”œâ”€â”€ note.md
    â””â”€â”€ note.json
```

---

### 3.8 `app/schemas/` - Pydantic ìŠ¤í‚¤ë§ˆ

**ì—­í• :** API ìš”ì²­/ì‘ë‹µ íƒ€ì… ì •ì˜

| íŒŒì¼ | ë‚´ìš© |
|------|------|
| `requests.py` | `UploadUrlRequest`, `ProcessVideoRequest`, `ProcessingOptions` |
| `responses.py` | `UploadUrlResponse`, `TaskStatusResponse`, `NoteResponse`, `SlideDetail` |

**ì„¤ê³„ ê·¼ê±°:**
- ê¸°ì¡´ `models/video.py`, `slide.py`, `note.py` ë¶„ë¦¬ â†’ **Request/Response í†µí•©**
- API ê°œë°œ ì‹œ ë¹ ë¥¸ ì°¸ì¡° ê°€ëŠ¥
- íŒŒì¼ ê°œìˆ˜ ê°ì†Œë¡œ ìœ ì§€ë³´ìˆ˜ ë‹¨ìˆœí™”

---

### 3.9 `app/core/exceptions.py` - ì˜ˆì™¸ ì²˜ë¦¬

**ì—­í• :** ì»¤ìŠ¤í…€ ì˜ˆì™¸ ë° HTTP Exception íŒ©í† ë¦¬

| ì˜ˆì™¸ | ìš©ë„ |
|------|------|
| `MathNoteException` | ê¸°ë³¸ ì˜ˆì™¸ |
| `VideoNotFoundError` | ì˜ìƒ ì—†ìŒ |
| `VideoProcessingError` | ì²˜ë¦¬ ì‹¤íŒ¨ |
| `StorageError` | ìŠ¤í† ë¦¬ì§€ ì˜¤ë¥˜ |
| `LLMError` | LLM í˜¸ì¶œ ì˜¤ë¥˜ |
| `TaskNotFoundError` | íƒœìŠ¤í¬ ì—†ìŒ |

---

## 4. ëª¨ë“ˆ ë¶„ë¦¬ ê²€ì¦

### 4.1 ë¶„ë¦¬ ì›ì¹™ ì¤€ìˆ˜ ì—¬ë¶€

| ì›ì¹™ | ì ìš© ìƒíƒœ | ì„¤ëª… |
|------|-----------|------|
| **ë‹¨ì¼ ì±…ì„ ì›ì¹™ (SRP)** | âœ… | ê° ëª¨ë“ˆì´ í•˜ë‚˜ì˜ ëª…í™•í•œ ì—­í•  ë‹´ë‹¹ |
| **ê°œë°©-íì‡„ ì›ì¹™ (OCP)** | âœ… | LLM/Storage ì¶”ìƒí™”ë¡œ í™•ì¥ ìš©ì´ |
| **ì˜ì¡´ì„± ì—­ì „ ì›ì¹™ (DIP)** | âœ… | ì¶”ìƒ ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´, êµ¬í˜„ì²´ êµì²´ ê°€ëŠ¥ |
| **ê´€ì‹¬ì‚¬ ë¶„ë¦¬** | âœ… | Vision/Audio/Synthesis íŠ¸ë™ ë…ë¦½ |
| **í…ŒìŠ¤íŠ¸ ìš©ì´ì„±** | âœ… | ì„œë¹„ìŠ¤ ë‹¨ìœ„ë¡œ ë…ë¦½ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ |

### 4.2 ì˜ì¡´ì„± íë¦„

```
routes/ â†’ deps.py â†’ services/ â†’ (llm/, storage/)
                          â†“
                     schemas/
```

- **ë‹¨ë°©í–¥ ì˜ì¡´ì„±** ìœ ì§€
- ìˆœí™˜ ì°¸ì¡° ì—†ìŒ
- ì˜ì¡´ì„± ì£¼ì…ìœ¼ë¡œ ê²°í•©ë„ ë‚®ì¶¤

---

## 5. ì‹¤í–‰ ë°©ë²•

### 5.1 ë¡œì»¬ ê°œë°œ í™˜ê²½

```bash
# 1. ê°€ìƒ í™˜ê²½ ìƒì„± (ê¶Œì¥)
conda create -n mathnote python=3.11
conda activate mathnote

# 2. ë””ë ‰í† ë¦¬ ì´ë™
cd backend

# 3. ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# 4. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp ../.env.example ../.env
# .env íŒŒì¼ í¸ì§‘í•˜ì—¬ API í‚¤ ì…ë ¥

# 5. ì„œë²„ ì‹¤í–‰
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### 5.2 Docker ì‹¤í–‰

```bash
# í”„ë¡œì íŠ¸ ë£¨íŠ¸ì—ì„œ
docker-compose up --build
```

### 5.3 API ë¬¸ì„œ í™•ì¸

ì„œë²„ ì‹¤í–‰ í›„:
- **Swagger UI:** http://localhost:8000/docs
- **ReDoc:** http://localhost:8000/redoc
- **Health Check:** http://localhost:8000/health

---

## 6. í…ŒìŠ¤íŠ¸ ë°©ë²•

### 6.1 í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
# backend ë””ë ‰í† ë¦¬ì—ì„œ

# ì „ì²´ í…ŒìŠ¤íŠ¸
pytest

# ì»¤ë²„ë¦¬ì§€ í¬í•¨
pytest --cov=app --cov-report=html

# íŠ¹ì • í…ŒìŠ¤íŠ¸ íŒŒì¼
pytest tests/test_api_video.py -v

# íŠ¹ì • í…ŒìŠ¤íŠ¸ í•¨ìˆ˜
pytest tests/test_api_video.py::test_get_upload_url -v
```

### 6.2 í…ŒìŠ¤íŠ¸ êµ¬ì¡°

```
tests/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ conftest.py              # ê³µí†µ fixture
â”œâ”€â”€ test_api_video.py        # Video API í…ŒìŠ¤íŠ¸
â”œâ”€â”€ test_api_note.py         # Note API í…ŒìŠ¤íŠ¸
â”œâ”€â”€ test_services_vision.py  # Vision ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸
â”œâ”€â”€ test_services_audio.py   # Audio ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸
â”œâ”€â”€ test_services_llm.py     # LLM í´ë¼ì´ì–¸íŠ¸ í…ŒìŠ¤íŠ¸
â”œâ”€â”€ test_services_storage.py # Storage í…ŒìŠ¤íŠ¸
â””â”€â”€ test_utils.py            # ìœ í‹¸ë¦¬í‹° í…ŒìŠ¤íŠ¸
```

### 6.3 í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ëª©í‘œ

| ëª¨ë“ˆ | ëª©í‘œ ì»¤ë²„ë¦¬ì§€ |
|------|--------------|
| API Routes | 90%+ |
| Services | 80%+ |
| Schemas | 100% |
| Utils | 100% |

### 6.4 í˜„ì¬ í…ŒìŠ¤íŠ¸ ê²°ê³¼

```
============================= 104 passed in 0.27s =============================

í…ŒìŠ¤íŠ¸ íŒŒì¼ë³„ í†µê³¼ í˜„í™©:
â”œâ”€â”€ test_api_note.py ............ 5 passed
â”œâ”€â”€ test_api_video.py ........... 8 passed
â”œâ”€â”€ test_schemas.py ............. 12 passed
â”œâ”€â”€ test_services_audio.py ...... 10 passed
â”œâ”€â”€ test_services_llm.py ........ 7 passed
â”œâ”€â”€ test_services_storage.py .... 11 passed
â”œâ”€â”€ test_services_synthesis.py .. 9 passed
â”œâ”€â”€ test_services_vision.py ..... 13 passed
â””â”€â”€ test_utils.py ............... 17 passed
```

---

## 7. ë‹¤ìŒ ë‹¨ê³„ (TODO)

### 7.1 MVP êµ¬í˜„
1. â¬œ `frame_extractor.py` - OpenCV í”„ë ˆì„ ì¶”ì¶œ êµ¬í˜„
2. â¬œ `scene_detector.py` - SSIM ìŠ¬ë¼ì´ë“œ ê°ì§€ êµ¬í˜„
3. â¬œ `ocr_processor.py` - Vision LLM OCR ì—°ë™
4. â¬œ `audio_extractor.py` - FFmpeg ì˜¤ë””ì˜¤ ì¶”ì¶œ êµ¬í˜„
5. â¬œ `stt_processor.py` - Whisper STT ì—°ë™
6. â¬œ `video_service.py` - ì „ì²´ íŒŒì´í”„ë¼ì¸ í†µí•©

### 7.2 í™•ì¥ ê¸°ëŠ¥
- â¬œ SOS ì‹¬ì¸µ í•´ì„¤ ê¸°ëŠ¥
- â¬œ React í”„ë¡ íŠ¸ì—”ë“œ
- â¬œ ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬ (ê¸´ ì˜ìƒ)
- â¬œ Redis ê¸°ë°˜ íƒœìŠ¤í¬ ìƒíƒœ ê´€ë¦¬

---

## 8. ê¸°ìˆ  ê²°ì • ìš”ì•½

| í•­ëª© | ì„ íƒ | ê·¼ê±° |
|------|------|------|
| OCR | Vision LLM | ìˆ˜ì‹ ì¸ì‹ ì •í™•ë„ ë†’ìŒ |
| ìŠ¤í† ë¦¬ì§€ | AWS S3 | Presigned URLë¡œ ì§ì ‘ ì—…ë¡œë“œ |
| ë¹„ë™ê¸° ì²˜ë¦¬ | BackgroundTasks | MVPì— ì í•© |
| LLM ì¶”ìƒí™” | Strategy íŒ¨í„´ | Provider êµì²´ ìš©ì´ |
| ìŠ¤í‚¤ë§ˆ êµ¬ì¡° | Request/Response ë¶„ë¦¬ | ì§ê´€ì  ê´€ë¦¬ |
